<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اتاق دیدار</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- صفحه بارگذاری -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2 id="loadingText">در حال راه‌اندازی...</h2>
            <p id="loadingSubtext"></p>
        </div>
    </div>
    
    <!-- صفحه اصلی اتاق -->
    <div class="room-container" id="roomContainer">
        <div class="room-header">
            <div class="room-info">
                <h2><i class="fas fa-video"></i> اتاق دیدار</h2>
                <p>شما: <span id="myUsername">کاربر</span></p>
                <p>کد اتاق: <span class="room-id" id="roomId">000000</span></p>
            </div>
            
            <div class="room-controls">
                <button id="copyLinkBtn" class="btn btn-secondary">
                    <i class="fas fa-copy"></i> کپی لینک
                </button>
                <button id="leaveBtn" class="btn btn-danger">
                    <i class="fas fa-sign-out-alt"></i> خروج
                </button>
            </div>
        </div>
        
        <div class="video-grid" id="videoGrid">
            <!-- ویدیوی خود کاربر -->
            <div class="video-container">
                <video id="myVideo" autoplay muted playsinline></video>
                <div class="video-label">شما (من)</div>
            </div>
        </div>
        
        <div class="controls-bar">
            <button id="toggleVideoBtn" class="control-btn active" title="دوربین">
                <i class="fas fa-video"></i>
            </button>
            <button id="toggleAudioBtn" class="control-btn active" title="میکروفون">
                <i class="fas fa-microphone"></i>
            </button>
            <button id="toggleChatBtn" class="control-btn" title="چت">
                <i class="fas fa-comment"></i>
            </button>
            <button id="fullscreenBtn" class="control-btn" title="تمام صفحه">
                <i class="fas fa-expand"></i>
            </button>
        </div>
        
        <div class="chat-panel" id="chatPanel">
            <div class="chat-messages" id="chatMessages">
                <div class="system-msg">به اتاق خوش آمدید! پیام‌های چت اینجا نمایش داده می‌شود.</div>
            </div>
            <div class="chat-input-group">
                <input type="text" id="chatInput" placeholder="پیام خود را بنویسید...">
                <button id="sendBtn"><i class="fas fa-paper-plane"></i> ارسال</button>
            </div>
        </div>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/simple-peer/9.11.1/simplepeer.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="room-script.js"></script>
</body>
</html>